# ============================================
# COMPILED GRAPHQL SCHEMA
# ============================================
# 
# This file is auto-generated by scripts/compile-schema.ts
# DO NOT EDIT THIS FILE MANUALLY
# 
# Generated: 2025-11-17T04:14:45.585Z
# Source: src/graphql/schema/*.graphql
# 
# To regenerate this file, run:
#   npm run compile-schema
# 
# ============================================

# ============================================
# schema.graphql
# ============================================

# Root schema file
scalar DateTime

type Query {
  # User queries
  me: User
  users: [User!]!
  user(id: ID!): User

  # Leave type queries
  leaveTypes: [LeaveType!]!
  leaveType(id: ID!): LeaveType

  # Leave request queries
  leaveRequests(
    status: LeaveRequestStatus
    userId: ID
    startDate: DateTime
    endDate: DateTime
  ): [LeaveRequest!]!
  leaveRequest(id: ID!): LeaveRequest
  
  # Leave history queries
  leaveHistory(
    userId: ID
    leaveTypeId: ID
    status: LeaveRequestStatus
    startDate: DateTime
    endDate: DateTime
    sortBy: LeaveHistorySortField
    sortDirection: SortDirection
    page: Int
    pageSize: Int
  ): LeaveHistoryResult!
  
  # Export leave history
  exportLeaveHistory(
    userId: ID
    leaveTypeId: ID
    status: LeaveRequestStatus
    startDate: DateTime
    endDate: DateTime
    format: ExportFormat!
  ): ExportResult!
  
  # Leave audit trail
  leaveAuditTrail(leaveRequestId: ID!): [LeaveAuditEntry!]!
  
  # Leave approval dashboard queries
  pendingApprovals: [LeaveRequest!]! # For managers and HR to see pending requests that need approval
  managerApprovedRequests: [LeaveRequest!]! # For HR to see requests approved by managers

  # Leave balance queries
  leaveBalances(userId: ID, year: Int): [LeaveBalance!]!
  leaveBalance(id: ID!): LeaveBalance
  userLeaveBalances(userId: ID!, year: Int): UserLeaveBalances!
  leaveBalancesByEmail(email: String!, year: Int): UserLeaveBalances!

  # Team queries
  teamMembers(managerId: ID!): [User!]!
  teamOnLeaveToday(managerId: ID!): [LeaveRequest!]!

  # Holiday queries
  holidays(year: Int): [Holiday!]!
  holiday(id: ID!): Holiday
}

type Mutation {
  # Auth mutations
  login(email: String!, password: String!): AuthPayload!
  
  # User mutations
  createUser(input: CreateUserInput!): User!
  updateUser(id: ID!, input: UpdateUserInput!): User!
  
  # Leave request mutations
  createLeaveRequest(input: CreateLeaveRequestInput!): LeaveRequest!
  createLeaveBatch(input: CreateLeaveBatchInput!): CreateLeaveBatchResult!
  updateLeaveRequest(id: ID!, input: UpdateLeaveRequestInput!): LeaveRequest!
  approveLeaveRequest(id: ID!, comment: String): LeaveRequest!
  rejectLeaveRequest(id: ID!, comment: String!): LeaveRequest!
  cancelLeaveRequest(id: ID!): LeaveRequest!
  
  # Role-specific approval mutations (for frontend compatibility)
  managerApproveLeaveRequest(id: ID!, comment: String): LeaveRequest!
  managerRejectLeaveRequest(id: ID!, comment: String!): LeaveRequest!
  hrApproveLeaveRequest(id: ID!, comment: String): LeaveRequest!
  hrRejectLeaveRequest(id: ID!, comment: String!): LeaveRequest!
  
  # Leave type mutations
  createLeaveType(input: CreateLeaveTypeInput!): LeaveType!
  updateLeaveType(id: ID!, input: UpdateLeaveTypeInput!): LeaveType!
  
  # Leave balance mutations
  updateLeaveBalance(id: ID!, input: UpdateLeaveBalanceInput!): LeaveBalance!
  initializeLeaveBalance(input: InitializeLeaveBalanceInput!): InitializeLeaveBalanceResult!
  
  # Holiday mutations
  createHoliday(input: CreateHolidayInput!): Holiday!
  updateHoliday(id: ID!, input: UpdateHolidayInput!): Holiday!
  deleteHoliday(id: ID!): Boolean!
}

# Auth types
type AuthPayload {
  token: String!
  user: User!
}


# ============================================
# user.graphql
# ============================================

# User related types and inputs

# User type
type User {
  id: ID!
  email: String!
  firstName: String!
  lastName: String!
  role: UserRole!
  createdAt: DateTime!
  updatedAt: DateTime!
  leaveRequests: [LeaveRequest!]!
  managedRequests: [LeaveRequest!]!
  leaveBalances: [LeaveBalance!]!
}

# User role enum
enum UserRole {
  hr
  manager
  employee
}

# User inputs
input CreateUserInput {
  email: String!
  password: String!
  firstName: String!
  lastName: String!
  role: UserRole!
}

input UpdateUserInput {
  email: String
  password: String
  firstName: String
  lastName: String
  role: UserRole
}


# ============================================
# leave-type.graphql
# ============================================

# Leave type related types and inputs

# Leave type
type LeaveType {
  id: ID!
  name: String!
  description: String
  color: String!
  active: Boolean!
  createdAt: DateTime!
  updatedAt: DateTime!
  leaveRequests: [LeaveRequest!]!
  leaveBalances: [LeaveBalance!]!
}

# Leave type inputs
input CreateLeaveTypeInput {
  name: String!
  description: String
  color: String
  active: Boolean
}

input UpdateLeaveTypeInput {
  name: String
  description: String
  color: String
  active: Boolean
}


# ============================================
# leave-request.graphql
# ============================================

# Leave request related types and inputs

# Leave request type
type LeaveRequest {
  id: ID!
  user: User!
  employee: User! @deprecated(reason: "Use 'user' instead")
  employeeId: ID! @deprecated(reason: "Use 'userId' instead")
  leaveType: LeaveType!
  startDate: DateTime!
  endDate: DateTime!
  halfDay: Boolean!
  halfDayStart: Boolean!
  halfDayEnd: Boolean!
  reason: String
  status: LeaveRequestStatus!
  manager: User
  managerComment: String
  managerActionAt: DateTime
  managerApproval: ApprovalInfo @deprecated(reason: "Use individual manager fields instead")
  hr: User
  hrComment: String
  hrActionAt: DateTime
  hrApproval: ApprovalInfo @deprecated(reason: "Use individual hr fields instead")
  createdAt: DateTime!
  updatedAt: DateTime!
}

# Approval info type for backward compatibility
type ApprovalInfo {
  approved: Boolean
  comment: String
  timestamp: DateTime
  by: User
}

# Leave request status enum
enum LeaveRequestStatus {
  pending
  manager_approved
  approved_by_manager @deprecated(reason: "Use 'manager_approved' instead")
  manager_rejected
  rejected_by_manager @deprecated(reason: "Use 'manager_rejected' instead")
  hr_approved
  approved_by_hr @deprecated(reason: "Use 'hr_approved' instead")
  hr_rejected
  rejected_by_hr @deprecated(reason: "Use 'hr_rejected' instead")
  cancelled
}

# Leave request inputs
input CreateLeaveRequestInput {
  userId: ID!
  employeeId: ID @deprecated(reason: "Use 'userId' instead")
  leaveTypeId: ID!
  startDate: DateTime!
  endDate: DateTime!
  halfDay: Boolean
  halfDayStart: Boolean
  halfDayEnd: Boolean
  reason: String
}

input UpdateLeaveRequestInput {
  leaveTypeId: ID
  startDate: DateTime
  endDate: DateTime
  halfDay: Boolean
  halfDayStart: Boolean
  halfDayEnd: Boolean
  reason: String
  status: LeaveRequestStatus
  managerId: ID
  managerComment: String
  managerActionAt: DateTime
  hrId: ID
  hrComment: String
  hrActionAt: DateTime
}


# ============================================
# leave-balance.graphql
# ============================================

# Leave balance related types and inputs

# Leave balance type
type LeaveBalance {
  id: ID!
  user: User!
  leaveType: LeaveType!
  year: Int!
  allocated: Float!
  entitled: Float! @deprecated(reason: "Use 'allocated' instead")
  used: Float!
  pending: Float!
  remaining: Float!
  createdAt: DateTime!
  updatedAt: DateTime!
}

# Aggregated leave balances for a user
type UserLeaveBalances {
  userId: ID!
  year: Int!
  balances: [LeaveBalance!]!
}

# Leave balance inputs
input UpdateLeaveBalanceInput {
  allocated: Float
  used: Float
}

# Input for initializing leave balances for an employee
input InitializeLeaveBalanceInput {
  userId: ID!
  year: Int
  defaultAllocation: Float!
}

# Response for initialize leave balances mutation
type InitializeLeaveBalanceResult {
  success: Boolean!
  message: String
  balances: [LeaveBalance!]
}


# ============================================
# leave-batch.graphql
# ============================================

# Leave batch creation types and inputs

# Single leave entry for batch creation
input LeaveEntry {
  leaveOn: DateTime!
  isHalfDay: Boolean!
}

# Input for batch leave creation
input CreateLeaveBatchInput {
  leaves: [LeaveEntry!]!
  leaveTypeName: String
  userEmail: String  # Required for service-to-service requests
}

# Result of batch leave creation
type CreateLeaveBatchResult {
  success: Boolean!
  message: String!
  leaveRequests: [LeaveRequest!]!
  numberOfDays: Float!
  remainingBalance: Float!
}


# ============================================
# leave-history.graphql
# ============================================

# Leave history related types and enums

# Leave history result type for pagination
type LeaveHistoryResult {
  items: [LeaveRequest!]!
  total: Int!
  page: Int!
  pageSize: Int!
  hasMore: Boolean!
}

# Leave audit entry type
type LeaveAuditEntry {
  id: ID!
  leaveRequestId: ID!
  action: LeaveAuditAction!
  performedBy: User!
  timestamp: DateTime!
  details: String
  previousStatus: LeaveRequestStatus
  newStatus: LeaveRequestStatus
}

# Leave audit action enum
enum LeaveAuditAction {
  created
  updated
  status_changed
  approved_by_manager
  rejected_by_manager
  approved_by_hr
  rejected_by_hr
  cancelled
}

# Leave history sort field enum
enum LeaveHistorySortField {
  startDate
  endDate
  createdAt
  updatedAt
  status
  leaveType
}

# Sort direction enum
enum SortDirection {
  asc
  desc
}

# Export format enum
enum ExportFormat {
  csv
  pdf
}

# Export result type
type ExportResult {
  url: String!
  filename: String!
  expiresAt: DateTime!
}


# ============================================
# holiday.graphql
# ============================================

# Holiday related types and inputs

# Holiday type
type Holiday {
  id: ID!
  name: String!
  date: DateTime!
  description: String
  createdAt: DateTime!
  updatedAt: DateTime!
}

# Holiday inputs
input CreateHolidayInput {
  name: String!
  date: DateTime!
  description: String
}

input UpdateHolidayInput {
  name: String
  date: DateTime
  description: String
}


# ============================================
# statistics.graphql
# ============================================

extend type Query {
  # Dashboard statistics
  leaveStatistics: LeaveStatistics!
}

# Leave statistics type
type LeaveStatistics {
  pendingApprovals: Int!
  totalEmployees: Int!
  onLeaveToday: Int!
  leaveReports: [LeaveReportStat!]!
}

# Leave report statistics by type
type LeaveReportStat {
  leaveType: LeaveType!
  count: Int!
  percentage: Float!
}


# ============================================
# hr-pending-approvals.graphql
# ============================================

extend type Query {
  # For HR to see all pending leave requests that need follow-up
  hrPendingApprovals: [LeaveRequest!]!
}

